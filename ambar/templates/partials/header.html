<header x-data="{
  mobileOpen: false,
  dropdown: null,
  mobileSubmenus: { hizmetler: false, guzergahlar: false },
  openDropdown(name) { this.dropdown = name },
  closeDropdown() { this.dropdown = null }
}" class="sticky top-0 z-50 bg-white/95 backdrop-blur-sm border-b border-slate-100 shadow-sm">

  <div class="max-w-[1440px] mx-auto px-6 lg:px-10">
    <div class="h-20 flex items-center justify-between">

      <!-- Logo -->
      <a href="{% url 'home' %}" class="flex items-center gap-3 group flex-shrink-0">
        <span class="text-primary transition-transform duration-200 group-hover:scale-110 inline-block">
          <svg class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2" />
            <path stroke-linecap="round" stroke-linejoin="round" d="M15 18H9" />
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14" />
            <circle cx="17" cy="18" r="2" />
            <circle cx="7" cy="18" r="2" />
          </svg>
        </span>
        <span class="text-xl font-bold uppercase tracking-tight text-slate-900">AN-ANT Ambar</span>
      </a>

      <!-- Desktop Navigation -->
      <nav class="hidden lg:flex items-center gap-8">

        <!-- Hizmetler Dropdown -->
        <div class="relative" @mouseenter="openDropdown('hizmetler')" @mouseleave="closeDropdown()">
          <button
            class="flex items-center gap-1.5 text-slate-700 hover:text-primary font-medium transition-colors duration-200 py-2">
            Hizmetler
            <svg :class="{ 'rotate-180': dropdown === 'hizmetler' }"
              class="w-4 h-4 transition-transform duration-200 text-slate-400" fill="none" viewBox="0 0 24 24"
              stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="m6 9 6 6 6-6" />
            </svg>
          </button>
          <div x-show="dropdown === 'hizmetler'" x-transition:enter="transition ease-out duration-200"
            x-transition:enter-start="opacity-0 translate-y-2" x-transition:enter-end="opacity-100 translate-y-0"
            x-transition:leave="transition ease-in duration-150" x-transition:leave-start="opacity-100 translate-y-0"
            x-transition:leave-end="opacity-0 translate-y-2" x-cloak
            class="absolute top-full left-0 mt-1 w-56 bg-white rounded-xl shadow-xl border border-slate-100 py-2 z-50">
            {% for service in header_services %}
            <a href="{% url 'service_detail' service.slug %}"
              class="block px-4 py-2.5 text-sm text-slate-700 hover:text-primary hover:bg-slate-50 transition-colors">
              {{ service.title }}
            </a>
            {% empty %}
            <span class="block px-4 py-2.5 text-sm text-slate-400">Hizmet bulunamadı</span>
            {% endfor %}
          </div>
        </div>

        <!-- Güzergahlar Dropdown -->
        <div class="relative" @mouseenter="openDropdown('guzergahlar')" @mouseleave="closeDropdown()">
          <button
            class="flex items-center gap-1.5 text-slate-700 hover:text-primary font-medium transition-colors duration-200 py-2">
            Güzergahlar
            <svg :class="{ 'rotate-180': dropdown === 'guzergahlar' }"
              class="w-4 h-4 transition-transform duration-200 text-slate-400" fill="none" viewBox="0 0 24 24"
              stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="m6 9 6 6 6-6" />
            </svg>
          </button>
          <div x-show="dropdown === 'guzergahlar'" x-transition:enter="transition ease-out duration-200"
            x-transition:enter-start="opacity-0 translate-y-2" x-transition:enter-end="opacity-100 translate-y-0"
            x-transition:leave="transition ease-in duration-150" x-transition:leave-start="opacity-100 translate-y-0"
            x-transition:leave-end="opacity-0 translate-y-2" x-cloak
            class="absolute top-full left-0 mt-1 w-52 bg-white rounded-xl shadow-xl border border-slate-100 py-2 z-50">
            {% for route in header_routes %}
            <a href="{% url 'route_detail' route.slug %}"
              class="block px-4 py-2.5 text-sm text-slate-700 hover:text-primary hover:bg-slate-50 transition-colors">
              {{ route.origin }} – {{ route.destination }}
            </a>
            {% empty %}
            <span class="block px-4 py-2.5 text-sm text-slate-400">Güzergah bulunamadı</span>
            {% endfor %}
          </div>
        </div>

        <a href="{% url 'about' %}"
          class="text-slate-700 hover:text-primary font-medium transition-colors duration-200">Hakkımızda</a>
        <a href="{% url 'contact' %}"
          class="text-slate-700 hover:text-primary font-medium transition-colors duration-200">İletişim</a>
      </nav>

      <!-- Right: CTA + Hamburger -->
      <div class="flex items-center gap-3">
        <a href="{% url 'contact' %}"
          class="hidden sm:inline-flex items-center gap-2 bg-primary text-white px-5 py-2.5 rounded-lg font-semibold text-sm hover:bg-primary-light transition-colors duration-200 shadow-md">
          Hızlı Teklif
        </a>
        <!-- Hamburger -->
        <button @click="mobileOpen = !mobileOpen"
          class="lg:hidden p-2 -mr-2 text-slate-600 hover:text-primary transition-colors rounded-lg"
          aria-label="Menüyü aç/kapat">
          <svg x-show="!mobileOpen" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"
            stroke-width="2">
            <line x1="4" x2="20" y1="6" y2="6" stroke-linecap="round" />
            <line x1="4" x2="20" y1="12" y2="12" stroke-linecap="round" />
            <line x1="4" x2="20" y1="18" y2="18" stroke-linecap="round" />
          </svg>
          <svg x-show="mobileOpen" x-cloak class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"
            stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M18 6 6 18M6 6l12 12" />
          </svg>
        </button>
      </div>

    </div>
  </div>

  <!-- Mobile Menu -->
  <div x-show="mobileOpen" x-transition:enter="transition ease-out duration-200"
    x-transition:enter-start="opacity-0 -translate-y-2" x-transition:enter-end="opacity-100 translate-y-0"
    x-transition:leave="transition ease-in duration-150" x-transition:leave-start="opacity-100 translate-y-0"
    x-transition:leave-end="opacity-0 -translate-y-2" x-cloak
    class="lg:hidden border-t border-slate-100 bg-white shadow-lg">
    <div class="px-6 py-4 space-y-1 max-w-[1440px] mx-auto">

      <!-- Mobile Hizmetler -->
      <div class="border-b border-slate-50">
        <button @click="mobileSubmenus.hizmetler = !mobileSubmenus.hizmetler"
          class="flex justify-between items-center w-full py-3.5 text-slate-700 font-medium text-sm">
          Hizmetler
          <svg :class="{ 'rotate-180': mobileSubmenus.hizmetler }" class="w-4 h-4 transition-transform text-slate-400"
            fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="m6 9 6 6 6-6" />
          </svg>
        </button>
        <div x-show="mobileSubmenus.hizmetler" x-cloak class="pl-4 pb-3 space-y-1">
          {% for service in header_services %}
          <a href="{% url 'service_detail' service.slug %}"
            class="block py-2 text-sm text-slate-600 hover:text-primary transition-colors">
            {{ service.title }}
          </a>
          {% empty %}
          <span class="block py-2 text-sm text-slate-400">Hizmet bulunamadı</span>
          {% endfor %}
        </div>
      </div>

      <!-- Mobile Güzergahlar -->
      <div class="border-b border-slate-50">
        <button @click="mobileSubmenus.guzergahlar = !mobileSubmenus.guzergahlar"
          class="flex justify-between items-center w-full py-3.5 text-slate-700 font-medium text-sm">
          Güzergahlar
          <svg :class="{ 'rotate-180': mobileSubmenus.guzergahlar }" class="w-4 h-4 transition-transform text-slate-400"
            fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="m6 9 6 6 6-6" />
          </svg>
        </button>
        <div x-show="mobileSubmenus.guzergahlar" x-cloak class="pl-4 pb-3 space-y-1">
          {% for route in header_routes %}
          <a href="{% url 'route_detail' route.slug %}"
            class="block py-2 text-sm text-slate-600 hover:text-primary transition-colors">
            {{ route.origin }} – {{ route.destination }}
          </a>
          {% empty %}
          <span class="block py-2 text-sm text-slate-400">Güzergah bulunamadı</span>
          {% endfor %}
        </div>
      </div>

      <a href="{% url 'about' %}"
        class="block py-3.5 text-slate-700 font-medium text-sm border-b border-slate-50 hover:text-primary transition-colors">Hakkımızda</a>
      <a href="{% url 'contact' %}"
        class="block py-3.5 text-slate-700 font-medium text-sm border-b border-slate-50 hover:text-primary transition-colors">İletişim</a>

      <div class="pt-4 pb-2">
        <a href="{% url 'contact' %}"
          class="block text-center bg-primary text-white px-5 py-3 rounded-xl font-semibold text-sm hover:bg-primary-light transition-colors">
          Hızlı Teklif Al
        </a>
      </div>
    </div>
  </div>

</header>